<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8" />
	<title>Nested List Sample(jQuery Mobile) 実験用</title>
	<link rel="stylesheet"  href="js/jquery.mobile-1.0a2.min.css" />
	<script type="text/javascript" src="js/jquery-1.4.4.js"></script>
	<script type="text/javascript" src="js/jquery.mobile-1.0a2.js"></script>
	<script type="text/javascript">
		$(function() {
			$("#db_list").append("<li id='aaa'>information_schema<ul></ul></li><li>mysql<ul></ul></li>");
			$("#db_list").listview();

			$("#aaa").tap(function(ev) {
		//		alert("tap");

				//ev.target を使うとエラーが発生するケースがあったため、
				//currentTarget を使用
				var targetId = $(ev.currentTarget).find("a").attr("href");
				targetId = targetId.replace("#", "");

				var el = $("[id='" + targetId + "']").find(".ui-content > ul");
				var parent = el.parent();

				el.remove();

				parent.append("<ul id='a123'><li>test123<ul></ul></li><li>test456<ul></ul></li></ul>");
				$("#a123").listview();
			});

		});
	</script>
</head>
<body>
	<!-- ページ -->
	<div data-role="page">
		<!-- ヘッダー -->
		<div data-role="header" data-theme="b">
			<h1>Nested List Sample 実験用</h1>
		</div>
		<!-- 内容 -->
		<div data-role="content">
			<ul id="db_list">
				<li>aaa<ul><li>123</li><li>456</li></ul></li>
			</ul>
		</div>
	</div>

</body>
</html>
